# QPS Benchmarks

```shell
./risu > cargo bench --bench qps
./risu > grpcurl -plaintext -import-path ./proto -proto hello.proto -d '{"name": "Tonic"}' '127.0.0.1:3001' helloworld.Greeter/SayHello

./risu > k6 login cloud --token 305af6c7b9bd7ea1fa67ffe8a50cd90713a3314c89a91ae9e946f32d1bba807e
./risu > k6 run benches/qps/hello.js
./risu > k6 run benches/qps/hello.js
./risu > k6 run --out=cloud benches/qps/tfs.js
./risu > k6 run benches/qps/tfs.js

./risu > ghz --insecure --async --proto ./proto/hello.proto --call helloworld.Greeter/SayHello -c 100 -z 10s --rps 50000 -d '{"name":"{{.RequestNumber}}"}' 127.0.0.1:3001
./risu > ghz --insecure --async --proto ./proto/hello.proto --call helloworld.Greeter/SayHello -c 100 -z 10s --rps 50000 -d '{"name":"bench"}' 127.0.0.1:3001

./risu > ghz --insecure --async --proto ./src/Equativ.TensorFlowServing/Protos/prediction_service.proto --call tensorflow.serving.PredictionService/Predict -c 100 -z 10s --rps 40000 -d '{ "modelSpec": { "name": "call_limiter_alpha" }, "inputs": { "environmentType": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "hasIfa": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "isInterstitial": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "isHeaderBidding": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "serverSideBiddingCallerId": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "outputDomain": { "dtype": "DT_STRING", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "stringVal": [ "" ] }, "hasEids": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "floorConstraint": { "dtype": "DT_FLOAT", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "floatVal": [ 0 ] }, "dspPartnerId": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "networkId": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "quovaCountryId": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "hasBuyerUid": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "outputBundleId": { "dtype": "DT_STRING", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "stringVal": [ "" ] }, "impressionType": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "platform": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "osId": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] } } }' 10.3.8.5:8500

./risu > ghz --insecure --async --proto ./src/Equativ.TensorFlowServing/Protos/prediction_service.proto --call tensorflow.serving.PredictionService/Predict -c 100 -z 10s --rps 10 -B call_limiter_alpha_request.bin 10.3.8.5:8500

./risu > ghz --insecure --async --proto ./src/Equativ.TensorFlowServing/Protos/prediction_service.proto --call tensorflow.serving.PredictionService/Predict -c 100 -z 10s --rps 10 -B call_limiter_alpha_request.bin 127.0.0.1:3001

grpcurl -plaintext -import-path ./src/Equativ.TensorFlowServing/Protos -proto prediction_service.proto -d '{ "modelSpec": { "name": "call_limiter_alpha" }, "inputs": { "environmentType": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "hasIfa": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "isInterstitial": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "isHeaderBidding": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "serverSideBiddingCallerId": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "outputDomain": { "dtype": "DT_STRING", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "stringVal": [ "" ] }, "hasEids": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "floorConstraint": { "dtype": "DT_FLOAT", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "floatVal": [ 0 ] }, "dspPartnerId": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "networkId": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "quovaCountryId": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "hasBuyerUid": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "outputBundleId": { "dtype": "DT_STRING", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "stringVal": [ "" ] }, "impressionType": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "platform": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "osId": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] } } }' '127.0.0.1:3001' tensorflow.serving.PredictionService/Predict




ghz --insecure --async --proto ./src/Equativ.TensorFlowServing/Protos/prediction_service.proto --call tensorflow.serving.PredictionService/Predict -c 100 -z 10s --rps 10 -d '{ "modelSpec": { "name": "call_limiter_beta" }, "inputs": { "quovaCountryId": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] }, "hasBuyerUid": { "dtype": "DT_INT32", "tensorShape": { "dim": [ { "size": "1" }, { "size": "1" } ] }, "intVal": [ 0 ] } } }' 127.0.0.1:3001

```